<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    Electron Demo

    <div>
      <p>本地页面</p>
      <input type="file" id="local-file"/>
    </div>

    <hr/>
    <div>
      <p>远程页面</p>
      <webview
        id="remote-view"
        src="http://127.0.0.1:8080"
        nodeintegration
      >
      </webview>
    </div>

    

    

    <!--
    <webview 
      id="foo" 
      src="http://www.youku.com/" 
      style="display:inline-flex; width:640px; height:480px"
      useragent="Mozilla/5.0 (Windows NT 6.1; WOW64; Trident/7.0; AS; rv:11.0) like Gecko"
      ---nodeintegration
      ---plugins
      ---disablewebsecurity
      ---allowpopups

    >
    </webview>
    -->

  </body>

  <script type="text/javascript">
    var ipcRenderer = require('electron').ipcRenderer;

    const inputEle = document.getElementById('local-file');
    inputEle.addEventListener('change', (e) => {
      const file = e.target.files[0];
      ipcRenderer.send('asynchronous-message', file);
    })


    // 监听主进程返回的消息
    ipcRenderer.on('asynchronous-reply', function (event, arg) {
      console.log('received!');
      alert(arg);
    });

    const webview = document.querySelector('webview')
    webview.addEventListener('dom-ready', () => {
      webview.openDevTools()
    })
  </script>
</html>
